<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NPS Survey Data</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header-row">
            <h1>NPS Survey Data</h1>
            <button onclick="resetAllFilters()" class="reset-all-btn">Сбросить все</button>
        </div>
        
        <div class="form-row">
            <!-- Фильтр: Проект -->
            <div class="filter-group">
                <label for="projectsDropdown">Проект:</label>
                <div class="dropdown">
                    <input type="text"
                           id="projectsDropdown"
                           class="dropdown-input"
                           placeholder="Загрузка проектов..."
                           readonly
                           onclick="toggleProjectDropdown()">
                    <div class="dropdown-list" id="projectList">
                        <div class="search-container">
                            <input type="text"
                                id="projectSearch"
                                class="search-input"
                                placeholder="Поиск проекта..."
                                oninput="filterProjects()">
                        </div>
                        <div class="dropdown-options" id="projectOptions"></div>
                    </div>
                </div>
            </div>
            
            <!-- Фильтр: Домен -->
            <div class="filter-group">
                <label for="domainFilter">Домен:</label>
                <div class="dropdown">
                    <input type="text"
                           id="domainFilter"
                           class="dropdown-input"
                           placeholder="Выберите проект сначала"
                           readonly
                           onclick="toggleDomainDropdown()">
                    <div class="dropdown-list" id="domainList">
                        <div class="search-container">
                            <input type="text"
                                id="domainSearch"
                                class="search-input"
                                placeholder="Поиск домена..."
                                oninput="filterDomains()">
                        </div>
                        <div class="dropdown-options" id="domainOptions"></div>
                    </div>
                </div>
            </div>
            
            <!-- Фильтр: Выберите ID кампании -->
            <div class="filter-group">
                <label for="campaignFilter">ID кампании:</label>
                <div class="dropdown">
                    <input type="text"
                           id="campaignFilter"
                           class="dropdown-input"
                           placeholder="Выберите домен сначала"
                           readonly
                           onclick="toggleCampaignDropdown()">
                    <div class="dropdown-list" id="campaignList">
                        <div class="search-container">
                            <input type="text"
                                id="campaignSearch"
                                class="search-input"
                                placeholder="Поиск campaign..."
                                oninput="filterCampaigns()">
                        </div>
                        <div class="dropdown-options" id="campaignOptions">
                            <div class="checkbox-controls">
                                <button type="button" onclick="selectAllCampaigns()" class="select-all-btn">Выбрать все</button>
                                <button type="button" onclick="deselectAllCampaigns()" class="deselect-all-btn">Сбросить все</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Фильтр: Дата (с) -->
            <div class="filter-group">
                <label for="dateFilter">Дата (с):</label>
                <div class="date-input-wrapper">
                    <input type="date" id="dateFilter">
                </div>
            </div>
        </div>

        <div class="buttons-group">
            <button onclick="loadData()">Загрузить данные с БД</button>
            <button onclick="downloadCSV()" id="downloadBtn" disabled>Скачать CSV</button>
        </div>
        
        <div id="message"></div>
        <div id="loading" class="loading" style="display: none;">Загрузка данных...</div>
        
        <div id="tableContainer" style="margin-top: 20px;"></div>
    </div>

    <script src="script.js"></script>
</body>
</html>