# NPS Survey Data Management System

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö NPS –æ–ø—Ä–æ—Å–æ–≤ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL.

## –û–ø–∏—Å–∞–Ω–∏–µ

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è:
- –ü–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö NPS –æ–ø—Ä–æ—Å–æ–≤ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–∞–±–ª–∏—á–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- –°–∫–∞—á–∏–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–µ CSV

## ¬†–ü—Ä–æ–µ–∫—Ç—ã

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç—ã —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ campaign_id.
–ö–∞–∂–¥—ã–π –ø—Ä–æ–µ–∫—Ç –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å 1 –∏ –±–æ–ª–µ–µ campaign_id.
–ü—Ä–æ–µ–∫—Ç—ã –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è —Å –ë–î –∏ –º–∞–ø—è—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ —Ç–∞–∫–æ–π –æ–±–µ–∫—Ç:
```
{
    "Project_1": [
        "1_Campaign_ID",
        "2_Campaign_ID,
        ...
    ],
    "Project_2": [
        "1_Campaign_ID",
        ...
    ]
    // ... –∏ —Ç.–¥.
}
```

## –§–∏–ª—å—Ç—Ä—ã

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤–µ–± –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –µ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã:
1. "–ü—Ä–æ–µ–∫—Ç:" - —Å–ø–∏—Å–æ–∫ –∏–∑ –º–∞–ø–∏–Ω–≥–∞, –µ—Å—Ç—å –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –ø—Ä–æ–µ–∫—Ç–∞
2. "–î–æ–º–µ–Ω" - –¥–æ–º–µ–Ω —Å–∞–π—Ç–∞ –≤ –≤–∏–¥–µ —Å–ø–∏—Å–∫–∞, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
3. "ID –∫–∞–º–ø–∞–Ω–∏–∏" - —Å–ø–∏—Å–æ–∫ –∏–∑ —á–µ–∫-–±–æ–∫—Å–æ–≤ —Å id, —Å–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞
4. "–î–∞—Ç–∞ (—Å):" - –¥–∞—Ç–∞–ø–∏–∫–µ—Ä —Å –≤—ã–±–æ—Ä–æ–º —á–∏—Å–ª–∞, –º–µ—Å—è—Ü–∞, –≥–æ–¥–∞
5. "–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ" - –∫–Ω–æ–ø–∫–∞, –∫–æ—Ç–æ—Ä–∞—è —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã

## –°—Ü–µ–Ω–∞—Ä–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

1. –í—ã–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –∏–∑ —Å–ø–∏—Å–∫–∞
2. –í—ã–±—Ä–∞—Ç—å –¥–æ–º–µ–Ω (–≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞)
3. –í—ã–±—Ä–∞—Ç—å id –∫–∞–º–ø–∞–Ω–∏–∏ (1 –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ)
4. –í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É —Å –∫–∞–∫–æ–≥–æ —á–∏—Å–ª–∞ –Ω—É–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
5. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î"
6. –î–æ–∂–¥–∞—Ç—å—Å—è –ø–æ—è–≤–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã
7. –ü–æ—Å–ª–µ –ø–æ—è–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å –∏—Ö –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É "–°–∫–∞—á–∞—Ç—å CSV"

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend**: Node.js, Express.js, PostgreSQL
- **Frontend**: Vanilla JavaScript, HTML5, CSS3
- **Database**: PostgreSQL
- **Environment**: dotenv –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 14+
- PostgreSQL
- –î–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö `service-nps`

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
```env
DB_HOST=service-nps.db.ru
DB_PORT=5432
DB_NAME=service-nps
DB_USER=your_username_here
DB_PASSWORD=your_password_here
DB_SSL=false
PORT=3000
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone git@github.com:zdd95/nps-db.git

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm init -y
npm install express pg cors dotenv
```
### 2. –ó–∞–ø—É—Å–∫ –∏ —Å—Ç–æ–ø

```bash
# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
node server.js

# –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
npm start

# –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø–æ–∫–∞–∂–µ—Ç—Å—è —Ç–∞–∫–∞—è –∏–Ω—Ñ–∞, –ø—Ä–∏–º–µ—Ä:
üöÄ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:3000
üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: service-nps.db.ru:5432/service-nps
‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
üìã –ü—Ä–æ–µ–∫—Ç–æ–≤ –≤ –ë–î: <N>

## –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

# –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω —Å–µ—Ä–≤–µ—Ä –Ω–∞–∂–º–∏—Ç–µ:
Ctrl + C

# –£–≤–∏–¥–µ—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ:
üõë –ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è...
–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞...
‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î –∑–∞–∫—Ä—ã—Ç–æ

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç 3000
lsof -i :3000

# –ï—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã –æ—Å—Ç–∞–ª–∏—Å—å, —Ç–æ –º–æ–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –ø–æ PID
kill <–Ω–æ–º–µ—Ä_–ø—Ä–æ—Ü–µ—Å—Å–∞>

# –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç, –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
kill -9 <–Ω–æ–º–µ—Ä_–ø—Ä–æ—Ü–µ—Å—Å–∞>

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
# –í –∫–æ–Ω—Å–æ–ª–∏ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ
./stop.sh
# –∏–ª–∏
npm run stop
```

## P.S.

–î–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é –ò–ò deepseek
–ó–∞–ø—Ä–æ—Å –±—ã–ª —Ç–∞–∫–æ–π:
 ```
–ù–∞–ø–∏—à–∏ –Ω–µ–±–æ–ª—å—à–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:
1. –î–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –≤ –ë–î  postgresql://@service-nps.db.ru:5432/service-nps
2. –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:
SELECT user_id, campaign_id, score, feedback, created_at
FROM nps.servis
where campaign_id = '<id>'
	or campaign_id = '<id>'
	or campaign_id = '<id>'
–≥–¥–µ id —ç—Ç–æ campaign_id, —Ç–µ–∫—Å—Ç–æ–≤–∞–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

3. –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ —Å–¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:
- –ø–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ campaign_id
- –ø–æ–ª–µ –¥–ª—è –¥–∞—Ç—ã (–≤ –ë–î –¥–∞—Ç–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –≤–∏–¥–µ: 2025-10-21 17:35:59.199 +0700)
- –≤—ã–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –≤ –≤–∏–¥–µ —Ç–∞–±–ª–∏—Ü—ã
- –Ω—É–∂–Ω–∞ –µ—â–µ –∫–Ω–æ–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ - –∫–æ—Ç–æ—Ä–æ–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ csv
```
–î–∞–ª–µ–µ –ø–æ –∑–∞–ø—Ä–æ—Å—É –∏—Ç–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ –±—ã–ª–∏ —É–ª—É—á—à–µ–Ω–∏—è –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

